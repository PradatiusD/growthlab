<h2 class="tight-title">
  Don't take our word for it.<br />
  There's a reason why our clients love us.
</h2>

<hr />

<p><br></p>
<p><br></p>
<section id="featuredQuote">
  <blockquote></blockquote>
  <cite></cite>
</section>
<section id="testimonials">
    <article class="one-fourth first">&nbsp;</article>
    <article class="one-fourth">
      <a href="Javascript:void(0);">
        <img src="http://stewartmartin.wpengine.com/wp-content/themes/stewart-martin/images/home-page/logos/Steel-Yard-Logo.png" scale="0">
        <blockquote style="display:none;">
          "Dan helped us increase profits, get<br>
          new business fast, and secure funding."
        </blockquote>
        <cite style="display:none;">
          Stephanie Issa<br>
          Proprietor / Studio Issa
        </cite>
      </a>
    </article>
    <article class="one-fourth">
      <a href="Javascript:void(0);">
        <img src="http://stewartmartin.wpengine.com/wp-content/themes/stewart-martin/images/home-page/logos/AS220-LOGO.png" scale="0">
        <blockquote style="display:none;">
          "GrowthLab is my go-to CFO.<br>
          I can't recommend them enough."
        </blockquote>
        <cite style="display:none;">
          Hamzah Ansari <br>
          Accelereach<br>
        </cite>
      </a>
    </article>
</section>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css">
<script>

  (function testimonials ($){

    var $featQuote = $('#featuredQuote');
    var $testimonials = $('#testimonials');

    var $featBlockQ = $featQuote.find('blockquote');
    var $featCite   = $featQuote.find('cite');

    // Select only articles that have blockquotes and cites
    var $articles = $testimonials.find('article').filter(function(index){

      var hasBlockQuote = $(this).find('blockquote').length > 0;
      var hasCite = $(this).find('cite').length > 0;

      console.log($(this),hasBlockQuote,hasCite);

      if (hasBlockQuote && hasCite) {
        return true;
      } else {
        return false;
      }
    });

    // First create JS object array of quotes
    var quotes = jQuery.map($articles, function(obj){

      var $obj = $(obj);

      return {
          blockquote: $obj.find('blockquote').html(),
          cite: $obj.find('cite').html()
      };
    });

    var i = 0;

    // Cycle quotes and change text if testimonials are not being hovered

    function cycleQuotes(){

      var j = i % quotes.length;

        if (!$testimonials.is(":hover") && !$featQuote.is(":hover")){

          $featQuote.addClass('animated fadeOutDown');

          setTimeout(function(){

            $featQuote.removeClass('fadeInUp fadeOutDown');

            $featBlockQ.html(quotes[j].blockquote);
            $featCite.html(quotes[j].cite);

            $featQuote.addClass('fadeInUp');

          }, 1000)

          $articles.find('img').removeClass('hovered');
          $articles.eq(j).find('img').addClass('hovered');
          i++;
        }

    }

    // Change global index and click on text
    $testimonials.find('a').click(function(){

      var $this = $(this);
      i = $this.index();
      $testimonials.find('img').removeClass('hovered');
      $this.find('img').addClass('hovered');
      $featBlockQ.html($this.find('blockquote').html());
      $featCite.html($this.find('cite').html());

    });

    // Start it
    cycleQuotes();

    // Make it change on interval
    setInterval(cycleQuotes, 6500);

    })(jQuery);

</script>